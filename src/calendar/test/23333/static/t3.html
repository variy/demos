<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        *{margin:0;padding:0;font-size:26px;}
    </style>
</head>
<body style="background:#509874;" id="t3">
T3
<script>
    function getTopWindow(){ //返回同源顶级window
        var cur = window;
        var pa_win = cur.parent;
        while(true){
            try{
                pa_win.document;//尝试检测访问
                //若上行没有报错，未进入catch，表示访问成功，pa_win为同源

                cur = pa_win;//将pa_win赋值给cur

                pa_win = cur.parent;//为上层父窗口检测做准备

                if(pa_win == cur){//cur已是最顶层，并且iframe链没有跨域window，这里判断不能用 '==='，IE8及以下不兼容
                    break;
                }
            }catch(e){
                //访问到pa_win报同源错误，退出循环
                break;
            }
        }
        return cur;
    }
    console.log(getTopWindow().document.body.id);

</script>
</body>
</html>